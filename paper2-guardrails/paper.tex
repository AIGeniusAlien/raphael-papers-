\documentclass[11pt]{article}
\usepackage{arxiv}
\usepackage{graphicx}
\usepackage{tikz}
\usepackage{booktabs}
\usepackage{amsmath,amssymb}
\usepackage{hyperref}
\usepackage{float}
\usepackage{siunitx}

\title{Guardrail and Safety Frameworks for Clinical LLMs}
\date{}
\author{Anthony Marra \\ Villanova University \\ \texttt{anthony.marra@villanova.edu}}

\begin{document}
\maketitle
\begin{abstract}
We formalize a modular safety framework for clinical LLMs, instantiated in Raphael. The framework layers (i) guideline-constrained RAG, (ii) deterministic dose/interaction checks, (iii) uncertainty calibration and abstention, and (iv) provenance logging. We present ablations isolating each layer, reliability analyses, and latency trade-offs. Our results show that conservative guardrails measurably reduce unsafe outputs with modest overhead.
\end{abstract}

\section{Introduction}
Clinical reliability demands verifiable evidence, calibrated confidence, and traceability. We articulate a guardrail stack that can be adopted by other clinical copilots.

\section{Methods}
\subsection{Stack}
\textbf{RAG constraints:} retrieved guideline snippets bound generations.  
\textbf{Deterministic checks:} dose ranges and DDI rules.  
\textbf{Uncertainty:} temperature scaling; abstain if $u>\tau$.  
\textbf{Provenance:} FHIR \texttt{Provenance} resources.

\subsection{Ablation Design}
We evaluate Base $\rightarrow$ +RAG $\rightarrow$ +Safety $\rightarrow$ +Calib across datasets.

\section{Results}
\begin{table}[H]\centering
\input{figs/ablation_table.tex}
\caption{Ablation of guardrail components (dev).}
\end{table}

\begin{figure}[H]\centering
\input{figs/reliability_curve.tikz}
\caption{Reliability curve before/after calibration (ECE $\downarrow$).}
\end{figure}

\section{Latency Analysis}
Median overhead: RAG +\SI{180}{ms}, safety +\SI{40}{ms}. See Fig.~\ref{fig:lat}.

\section{Discussion}
Guardrails reduce unsafe outputs; abstention is essential for borderline cases.

\section{Conclusion}
A practical, modular safety stack improves clinical reliability with minimal latency.

\bibliographystyle{unsrt}
\bibliography{refs}
\end{document}
